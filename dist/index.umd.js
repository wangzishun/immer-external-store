!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("immer"),require("use-sync-external-store/shim/with-selector")):"function"==typeof define&&define.amd?define(["exports","immer","use-sync-external-store/shim/with-selector"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ImmerExternalStore={},e.Immer,e.withSelector)}(this,(function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i=Object.prototype.hasOwnProperty,c=function(e,t){if(Object.is(e,t))return!0;if("object"!==n(e)||!e||"object"!==n(t)||!t)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(var u=i.bind(t),c=0;c<r.length;c++){var f=r[c];if(!u(f)||!Object.is(e[f],t[f]))return!1}return!0},f=function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!c(e[r],t[r]))return!1;return!0},a=function(e){var r=e,n=new Set,o=new Map,u=function(e){return null!=e&&e.length?e.map((function(e){if("function"==typeof e)return e(r);if("string"==typeof e){var t=o.get(e);return t||(t=new Function("o",'return o["'.concat(e.split(".").join('"]["'),'"];')),o.set(e,t)),t(r)}return null})):[r]};return{subscribe:function(e){return n.add(e),function(){return n.delete(e)}},getSnapshot:function(){return r},dispatch:function(e){r=t.produce(r,(function(t){"function"==typeof e&&e(t),Object.assign(t,e)})),n.forEach((function(e){return e()}))},selectorImplement:u,get:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return u(t)},replace:function(e){r="function"==typeof e?t.produce(r,e):e}}};function l(e){var t=a(e),n=t.subscribe,u=t.getSnapshot,i=t.selectorImplement,c=t.dispatch,l=t.get,s=t.replace;return{useState:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var l=r.useSyncExternalStoreWithSelector(n,u,u,(function(){return i(t)}),f);return[].concat(o(l),[c])},dispatch:c,get:l,replace:s}}e.createImmerExternalStore=l,e.default=l,Object.defineProperty(e,"__esModule",{value:!0})}));
