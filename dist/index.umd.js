!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("immer")):"function"==typeof define&&define.amd?define(["exports","react","immer"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ReactEventContext={},e.React,e.Immer)}(this,(function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var u=Object.prototype.hasOwnProperty,o=function(e,t){if(Object.is(e,t))return!0;if("object"!==n(e)||!e||"object"!==n(t)||!t)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(var c=u.bind(t),i=0;i<r.length;i++){var f=r[i];if(!c(f)||!Object.is(e[f],t[f]))return!1}return!0},c=function(e,t,r){return null!=e&&e.length?"function"==typeof e[0]?e[0](t):e.length?e.map((function(e){var n=r.get(e);return n||(n=new Function("o","return o.".concat(e,";")),r.set(e,n)),n(t)})):t:t};e.createEventContext=function(e){var n=t.createContext({});return{Provider:function(r){var u=r.children,o=t.useRef(null);return o.current||(o.current={state:e,subscriptions:new Set,getters:new Map}),t.createElement(n.Provider,{value:o},u)},useConsumer:function(){for(var e=arguments.length,u=new Array(e),i=0;i<e;i++)u[i]=arguments[i];var f=t.useContext(n),s=t.useState((function(){return c(u,f.current.state,f.current.getters)})),a=t.useRef();a.current=function(){var e=c(u,f.current.state,f.current.getters);o(s[0],e)||s[1](e)},t.useEffect((function(){var e=function(e){return a.current(e)};return f.current.subscriptions.add(e),function(){f.current.subscriptions.delete(e)}}),[]);var l=t.useRef((function(e){var t=r.produce(f.current.state,(function(t){e(t)}));f.current.state=t,f.current.subscriptions.forEach((function(e){return e()}))}));return[s[0],l.current]}}}}));
